<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Web Design</title>
  <link rel="stylesheet" href="dist/css/grapes.min.css">
  <script src="dist/grapes.min.js"></script>
  <script src="dist/plugins/grapes-export/grapesjs-plugin-export.min.js"></script>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }

    .CodeMirror {
      min-height: 450px;
      margin-bottom: 8px;
    }
  </style>
</head>

<body>
  <div id="gjs" style="height:0px; overflow:hidden;">
    <div class="panel">
      <h1 class="welcome">Welcome to</h1>
      <div class="big-title">
        <svg class="logo" viewBox="0 0 100 100">
          <path
            d="M40 5l-12.9 7.4 -12.9 7.4c-1.4 0.8-2.7 2.3-3.7 3.9 -0.9 1.6-1.5 3.5-1.5 5.1v14.9 14.9c0 1.7 0.6 3.5 1.5 5.1 0.9 1.6 2.2 3.1 3.7 3.9l12.9 7.4 12.9 7.4c1.4 0.8 3.3 1.2 5.2 1.2 1.9 0 3.8-0.4 5.2-1.2l12.9-7.4 12.9-7.4c1.4-0.8 2.7-2.2 3.7-3.9 0.9-1.6 1.5-3.5 1.5-5.1v-14.9 -12.7c0-4.6-3.8-6-6.8-4.2l-28 16.2" />
        </svg>
        <span>GrapesJS</span>
      </div>
      <div class="description">
        This is a demo content from index.html. For the development, you shouldn't edit this file, instead you can
        copy and rename it to _index.html, on next server start the new file will be served, and it will be ignored by
        git.
      </div>
      <div>
        test
      </div>
    </div>
    <style>
      .panel {
        width: 90%;
        max-width: 700px;
        border-radius: 3px;
        padding: 30px 20px;
        margin: 150px auto 0px;
        background-color: #d983a6;
        box-shadow: 0px 3px 10px 0px rgba(0, 0, 0, 0.25);
        color: rgba(255, 255, 255, 0.75);
        font: caption;
        font-weight: 100;
      }

      .welcome {
        text-align: center;
        font-weight: 100;
        margin: 0px;
      }

      .logo {
        width: 70px;
        height: 70px;
        vertical-align: middle;
      }

      .logo path {
        pointer-events: none;
        fill: none;
        stroke-linecap: round;
        stroke-width: 7;
        stroke: #fff
      }

      .big-title {
        text-align: center;
        font-size: 3.5rem;
        margin: 15px 0;
      }

      .description {
        text-align: justify;
        font-size: 1rem;
        line-height: 1.5rem;
      }
    </style>
  </div>

  <script type="text/javascript">
    var swv = 'sw-visibility';
    var expt = 'export-template';
    var osm = 'open-sm';
    var otm = 'open-tm';
    var ola = 'open-layers';
    var obl = 'open-blocks';
    var ful = 'fullscreen';
    var prv = 'preview';
    var cmdClear = 'canvas-clear';
    var cmdImport = 'open-import';
    var panels = {
      defaults: [
        {
          id: 'commands',
          buttons: [{}]
        },
        {
          id: 'options',
          buttons: [
            {
              active: true,
              id: swv,
              className: 'fa fa-square-o',
              command: swv,
              context: swv,
              attributes: { title: '显示边框' }
            },
            {
              id: prv,
              className: 'fa fa-eye',
              command: prv,
              context: prv,
              attributes: { title: '预览' }
            },
            {
              id: ful,
              className: 'fa fa-arrows-alt',
              command: ful,
              context: ful,
              attributes: { title: '全屏' }
            },
            {
              id: expt,
              className: 'fa fa-code',
              command: expt,
              attributes: { title: '查看代码' }
            },
            {
              id: 'undo',
              className: 'fa fa-undo',
              command: e => e.runCommand('core:undo'),
              attributes: { title: '撤回' }
            },
            {
              id: 'redo',
              className: 'fa fa-repeat',
              command: e => e.runCommand('core:redo'),
              attributes: { title: '取消撤回' }
            },
            {
              id: cmdImport,
              className: 'fa fa-upload',
              command: cmdImport,
              attributes: { title: '导入' }
            },
            {
              id: cmdClear,
              className: 'fa fa-trash',
              command: cmdClear, //e => e.runCommand('core:' + cmdClear),
              attributes: { title: '清空' }
            }
          ]
        },
        {
          id: 'views',
          buttons: [
            {
              id: osm,
              className: 'fa fa-paint-brush',
              command: osm,
              active: true,
              togglable: 0,
              attributes: { title: '样式管理' }
            },
            {
              id: otm,
              className: 'fa fa-cog',
              command: otm,
              togglable: 0,
              attributes: { title: '设置' }
            },
            {
              id: ola,
              className: 'fa fa-bars',
              command: ola,
              togglable: 0,
              attributes: { title: '层级管理' }
            },
            {
              id: obl,
              className: 'fa fa-th-large',
              command: obl,
              togglable: 0,
              attributes: { title: '元素管理' }
            }
          ]
        }
      ]
    };

    var deviceManager = {
      deviceLabel: '设备',
      devices: [
        {
          name: '桌面',
          width: ''
        },
        {
          name: '平板',
          width: '768px',
          widthMedia: '992px'
        },
        {
          name: '手机(568px)',
          width: '568px',
          widthMedia: '768px'
        },
        {
          name: '手机(320px)',
          width: '320px',
          widthMedia: '480px'
        }
      ]
    };

    var styleManager = {
      textNoElement: '选择元素查看样式',
      sectors: [{
        formatPropertyName: true,
        name: '基础',
        open: true,
        buildProps: ['float', 'display', 'position', 'top', 'bottom', 'left', 'right']
      }, {
        formatPropertyName: true,
        name: '宽高和边距',
        open: false,
        buildProps: ['width', 'height', 'max-width', 'min-width', 'max-height', 'min-height', 'margin', 'padding'],
      }, {
        formatPropertyName: true,
        name: '字体和颜色',
        open: false,
        buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-shadow'],
      }, {
        formatPropertyName: true,
        name: '边框',
        open: false,
        buildProps: ['border-radius-c', 'background-color', 'border-radius', 'border', 'box-shadow', 'background'],
      }, {
        formatPropertyName: true,
        name: '其他',
        open: false,
        buildProps: ['transition', 'perspective', 'transform'],
      },
      {
        formatPropertyName: true,
        name: 'Flex',
        open: false,
        buildProps: ['flex-direction', 'flex-wrap', 'justify-content', 'align-items', 'align-content', 'order', 'flex-basis', 'flex-grow', 'flex-shrink', 'align-self']
      }
      ]
    };

    var selectorManager = {
      label: '样式',
      statesLabel: '默认',
      selectedLabel: '当前选中:'
    };

    var traitManager = {
      labelContainer: '组件设置',
      labelPlhText: '文本',
      textNoElement: '选择元素进行设置'
    };

    var plugins = ['grapesjs-plugin-export'];
    var pluginsOpts = {
      'grapesjs-plugin-export': {
        btnLabel: '下载',
        filenamePfx: '',
        filename: 'page.zip'
      }
    };

    var commands = {
      defaults: ['undo', 'redo']
    };

    var importOpt = {
      modalImportTitle: '导入',
      modalImportButton: '导入',
      modalImportLabel: '<div style="margin-bottom:10px;font-size:13px;">将HTML/CSS粘贴到此处并单击“导入”</div>',
      modalImportContent: function (ed) {
        return ed.getHtml() + '<style>' + ed.getCss() + '</style>';
      }
    };

    var editor = grapesjs.init({
      textViewCode: '代码',
      showOffsets: 1,
      noticeOnUnload: 0,
      container: '#gjs',
      height: '100%',
      confirmClearCanvas: '你确定要清空页面吗?',
      fromElement: true,
      storageManager: { autoload: 0 },
      panels: panels,
      deviceManager: deviceManager,
      styleManager: styleManager,
      selectorManager: selectorManager,
      traitManager: traitManager,
      openImportOpt: importOpt,
      plugins: plugins,
      pluginsOpts: pluginsOpts
    });



    // editor.BlockManager.add('testBlock', {
    //   label: 'Block',
    //   attributes: { class: 'gjs-fonts gjs-f-b1' },
    //   content: `<div style="padding-top:50px; padding-bottom:50px; text-align:center">Test block</div>`
    // })
  </script>
</body>

</html>